"""
チェックリスト期限表示のレイアウト改善ガイド
"""

print("""
╔═══════════════════════════════════════════════════════════════════╗
║     📅 チェックリスト期限表示のレイアウト改善完了                 ║
╚═══════════════════════════════════════════════════════════════════╝

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🐛 発見された問題
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

❌ 複数の期限が迫ったチェックリストがある場合、
   ホーム画面のレイアウトが崩れてしまう


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✨ 実施した改善
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新しい表示ルール】

1️⃣  期限が迫ったチェックリストが1個の場合
   → 具体的な名前と期限を表示
   
   例: 「宿題セット あと3日！」


2️⃣  期限が迫ったチェックリストが2個以上の場合
   → まとめて件数を表示（レイアウト崩れを防止）
   
   例: 「2個のチェックリストの期限が近いよ！」
        「5個のチェックリストの期限が近いよ！」


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 改善の詳細
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【修正前の問題】
┌──────────────────────────┐
│ 宿題セット あと3日！         │
│ レポート作成 明日！          │  ← 縦に並んで
│ テスト勉強 今日！            │  ← レイアウト崩れ
└──────────────────────────┘


【修正後の改善】
┌──────────────────────────┐
│ 3個のチェックリストの        │  ← 1行にまとめて
│ 期限が近いよ！              │  ← すっきり表示
└──────────────────────────┘


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎨 UIの改善点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. まとめ表示はクリック可能
   - チェックリスト選択画面にリンク
   - クリックして詳細を確認できる

2. ホバーエフェクト
   - マウスを乗せると少し浮き上がる
   - クリック可能であることを視覚的に示す

3. アイコンの変更
   - 1個: 📅 カレンダーアイコン
   - 複数: ⚠️ 警告アイコン（注意を促す）

4. 色は常に赤色（緊急）
   - 複数ある場合は自動的に緊急扱い
   - 注意を引く赤色で表示


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 表示パターン
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【パターン1: チェックリスト0個】
表示: なし


【パターン2: チェックリスト1個】
┌────────────────────────────────┐
│ 📅 宿題セット あと3日！         │
└────────────────────────────────┘

- チェックリスト名を表示（最大15文字）
- 残り日数を表示
- クリック不可（静的表示）


【パターン3: チェックリスト2個】
┌────────────────────────────────┐
│ ⚠️ 2個のチェックリストの       │
│    期限が近いよ！              │
└────────────────────────────────┘

- 件数を表示
- クリック可能（チェックリスト選択画面へ）
- ホバーで少し浮き上がる


【パターン4: チェックリスト5個】
┌────────────────────────────────┐
│ ⚠️ 5個のチェックリストの       │
│    期限が近いよ！              │
└────────────────────────────────┘

- 件数を表示
- クリック可能


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔧 技術的な変更点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【テンプレート処理】

修正前:
{% for checklist in upcoming_checklists %}
  <!-- 全てを個別表示 -->
{% endfor %}

修正後:
{% if upcoming_checklists|length == 1 %}
  <!-- 1個の場合: 具体的に表示 -->
  {{ checklist.checklist_name }} あと{{ days }}日！
  
{% else %}
  <!-- 2個以上の場合: まとめて表示 -->
  {{ count }}個のチェックリストの期限が近いよ！
  
{% endif %}


【CSS追加】

.deadline-item:hover {
  transform: translateY(-2px);      /* 浮き上がる */
  box-shadow: 0 6px 0 #d99300;     /* 影を大きく */
}

.deadline-item.urgent:hover {
  box-shadow: 0 6px 0 #cc3333;     /* 赤色の影 */
}


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 動作確認手順
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Step 1: チェックリストを1個だけ作成
  1. 期限付きチェックリストを1個作成
  2. ホーム画面を表示
  3. 確認: チェックリスト名と期限が表示される
  
  表示例: 「宿題セット あと3日！」


Step 2: チェックリストを複数作成
  1. 期限付きチェックリストをさらに2個作成
     （合計3個になる）
  2. ホーム画面を表示
  3. 確認: まとめて表示される
  
  表示例: 「3個のチェックリストの期限が近いよ！」


Step 3: クリック動作を確認
  1. まとめ表示をクリック
  2. チェックリスト選択画面に遷移することを確認
  3. 全てのチェックリストが表示されることを確認


Step 4: ホバー効果を確認
  1. まとめ表示にマウスを乗せる
  2. 少し浮き上がることを確認
  3. カーソルがポインターになることを確認


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 ユーザーエクスペリエンスの向上
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【改善前の問題点】
- 複数表示でレイアウトが崩れる
- 情報が多すぎて見づらい
- どれを優先すべきか分からない

【改善後のメリット】
✅ レイアウトが常に1行で安定
✅ 情報がシンプルで見やすい
✅ クリックで詳細を確認できる
✅ 「期限が近い」という重要な情報を強調
✅ ホーム画面がすっきり


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 今後の改善案
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. バッジ表示
   - まとめ表示の右上に件数バッジ
   - 例: 「チェックリストの期限が近いよ！ [3]」

2. 緊急度の細分化
   - 今日: 「今日が期限のチェックリストが〇個！」
   - 明日: 「明日が期限のチェックリストが〇個！」

3. プログレス表示
   - 完了率を表示
   - 例: 「3個のチェックリスト（完了率60%）」

4. ツールチップ
   - まとめ表示にマウスを乗せると
   - チェックリスト名の一覧を表示


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

""")
