<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>„Ç¢„Ç´„Ç¶„É≥„ÉàÔºàÊïôÂì°Ôºâ</title>
    <style>
        body { font-family: "Segoe UI", Meiryo, sans-serif; background:#f5f7fa; margin:0; padding:20px; }
        /* ‰∏äÈÉ®„Çø„Éñ */
        .top-tabs { max-width:1000px; margin:0 auto 18px; border:2px solid #333; background:#fff; padding:6px 8px; box-sizing:border-box; }
        .tabs { display:flex; gap:0; }
        .tabs a { flex:1 0 auto; display:block; padding:8px 12px; border-right:1px solid #333; text-align:center; text-decoration:none; color:#111; font-weight:600; }
        .tabs a:last-child { border-right: none; }

        /* „É°„Ç§„É≥„Ç´„Éº„Éâ */
        .card { max-width:1000px; margin:0 auto; background:#fff; border:1px solid #ddd; padding:18px; box-shadow:0 6px 20px rgba(0,0,0,0.05); box-sizing:border-box; }

        .main { display:flex; gap:24px; align-items:flex-start; }
        .left { width:220px; text-align:center; }
        .avatar-circle {
            width:140px; height:140px; border-radius:50%; border:3px solid #bbb; display:flex; align-items:center; justify-content:center; background:#fafafa; font-size:48px; margin:6px auto;
        }
        .meta { margin-top:10px; font-size:14px; color:#333; }
        .logout-area { margin-top:14px; }

        .info { flex:1; }
        .info-table { width:100%; border-collapse:collapse; }
        .info-table td { padding:6px 8px; vertical-align:top; }
        .info-table .label { width:140px; font-weight:700; color:#666; }
        .info-table .value { color:#222; }

        .top-row { display:flex; justify-content:space-between; align-items:center; gap:12px; }
        .id-box { font-size:18px; font-weight:700; color:#333; }

        /* „Ç∞„É´„Éº„Éó„É™„Çπ„Éà */
        .groups { margin-top:16px; display:flex; flex-direction:column; gap:10px; }
        .group-row { display:flex; align-items:center; gap:12px; padding:8px; border-radius:6px; background:#f8f9fb; border:1px solid #e6e9ee; }
        .group-name { flex:1; font-weight:600; color:#222; }
        .group-meta { color:#666; font-size:13px; }
        .btn { padding:6px 10px; border-radius:6px; border:1px solid #bbb; background:#f0f2f5; cursor:pointer; font-size:13px; }
        .btn.detail { background:#e8f0ff; border-color:#9cc0ff; }
        .btn.del { background:#ffecec; border-color:#ffa6a6; }
        .btn.logout { background:#2b8cff; color:#fff; border:none; padding:10px 18px; border-radius:8px; }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media(max-width:720px){
            .main { flex-direction:column; }
            .left { width:100%; text-align:left; display:flex; gap:12px; align-items:center; }
            .avatar-circle { width:96px; height:96px; font-size:32px; }
        }
    </style>
</head>
<body>
    <div class="top-tabs">
        <nav class="tabs">
            <a href="#">„Ç∑„Çπ„ÉÜ„É†„Çø„Éñ</a>
            <a href="#">„Ç¢„É´„Ç¥„É™„Ç∫„É†„Çø„Éñ</a>
            <a href="#">ÈÄ≤ÊçóÁÆ°ÁêÜ„Çø„Éñ</a>
            <a href="{% url 'accounts:karihome' %}">„Ç¢„Ç´„Ç¶„É≥„Éà</a>
        </nav>
    </div>

    <div class="card">
        <div class="main">
            <div class="left">
                <div class="avatar-circle">
                    {% if user.profile.avatar %}
                        <img src="{{ user.profile.avatar.url }}" alt="avatar" style="width:100%;height:100%;border-radius:50%;">
                    {% else %}
                        üë§
                    {% endif %}
                </div>

                <div class="meta">
                    <div>ID <strong>{{ account.user_id|default:user.id }}</strong></div>
                    <div>ÂêçÂâç <strong>{{ account.user_name|default:user.get_full_name|default:"codemon" }}</strong></div>
                    <div>Âπ¥ÈΩ¢ {{ account.age|default:user.profile.age|default:"38Ê≠≥" }}</div>

                    <div class="logout-area">
                        <form id="logout-form" method="post" action="{% url 'accounts:logout' %}">
                            {% csrf_token %}
                            <button type="button" id="logout-btn" class="btn logout">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="info">
                <div class="top-row">
                    <div class="id-box">ÂêçÂâç: {{ account.user_name|default:user.get_full_name|default:"codemon" }}</div>
                    <div style="text-align:right">
                        <div>Âàù„ÇÅ„Å¶‰ºö„Å£„ÅüÊó•: <strong>{% if first_met %}{{ first_met|date:"Y/n/j" }}{% else %}---{% endif %}</strong></div>
                        <div>Á¥ØË®àÊó•Êï∞: <strong>{{ total_days|default:"0Êó•" }}</strong></div>
                    </div>
                </div>

                <table class="info-table" style="margin-top:12px;">
                    <tr><td class="label">ÊâÄÂ±û</td><td class="value">{{ account.account_type|default:user.profile.kyojin|default:"ÊïôÂì°" }}</td></tr>
                </table>

                <div class="groups">
                    <div class="groups-header" style="display:flex; align-items:center; justify-content:space-between;">
                        <div style="font-weight:700; color:#444;">„Ç∞„É´„Éº„Éó</div>
                        <div class="groups-actions" style="margin-left:12px;">
                            <a class="btn" href="{% url 'accounts:group_create' %}">Êñ∞Ë¶è‰ΩúÊàê</a>
                        </div>
                    </div>
                        {% if groups %}
                            {% for g in groups %}
                                <div class="group-row">
                                    <div class="group-name">{{ g.name }}</div>
                                    <div class="group-meta">{{ g.member_count }}‰∫∫</div>
                                    <a class="btn detail" href="{% url 'accounts:group_menu' g.group_id %}">Ë©≥Á¥∞</a>
                                    <form method="get" action="{% url 'accounts:group_delete_confirm' g.group_id %}" style="display:inline">
                                        <button type="submit" class="btn del">ÂâäÈô§</button>
                                    </form>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div style="padding:10px 6px; color:#666;">„Ç∞„É´„Éº„Éó„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                        {% endif %}

                        
                        
                    </div>

                </div>

            </div>
    </div>

  <!-- Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´Ôºàs_account „Å®Âêå„ÅòÊßãÊàêÔºâ -->
  <div id="confirm-modal" aria-hidden="true" style="display:none; position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.4);align-items:center;justify-content:center">
    <div class="box" role="dialog" aria-modal="true" aria-labelledby="confirm-title" style="background:#fff;padding:20px;border-radius:8px;min-width:320px;text-align:center">
      <div id="confirm-title">„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åô„ÅãÔºü</div>
      <div class="buttons" style="margin-top:16px;display:flex;gap:12px;justify-content:center">
        <button class="btn yes" id="confirm-yes" style="padding:8px 14px;border-radius:6px;border:none;background:#f46b6b;color:#fff">„ÅØ„ÅÑ</button>
        <button class="btn no" id="confirm-no" style="padding:8px 14px;border-radius:6px;border:none;background:#e0e6ef">„ÅÑ„ÅÑ„Åà</button>
      </div>
    </div>
  </div>

  <script>
  (function(){
    var logoutBtn = document.getElementById('logout-btn');
    var logoutForm = document.getElementById('logout-form');
    var modal = document.getElementById('confirm-modal');
    var yes = document.getElementById('confirm-yes');
    var no = document.getElementById('confirm-no');
    if(logoutBtn){ logoutBtn.addEventListener('click', function(){ modal.style.display = 'flex'; }); }
    if(no){ no.addEventListener('click', function(){ modal.style.display = 'none'; }); }
    if(yes){ yes.addEventListener('click', function(){ if(logoutForm) logoutForm.submit(); }); }
  })();
  </script>

        </div>
    </div>
</body>
</html>