<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>新規登録（教員）</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        :root{ --bg:#f8fafc; --muted:#444; --accent:#4b90ff }
        body{margin:0;background:var(--bg);font-family:Meiryo, 'Hiragino Kaku Gothic ProN', 'Segoe UI',sans-serif;color:#222}
        .container{max-width:760px;margin:28px auto;padding:0;background:transparent}
        .panel-right{background:#fff;padding:36px 40px;border:2px solid #111}
        .panel-right h2{text-align:center;margin:0 0 18px 0}
        .form-grid{display:grid;grid-template-columns:140px 1fr;row-gap:18px;column-gap:24px;align-items:center}
        .label{font-size:16px;color:var(--muted);text-align:left}
        .control input, .control select{width:260px;padding:8px 10px;border:1px solid #333;border-radius:4px}
        .submit-area{text-align:center;margin-top:28px}
        .big-btn{background:#e7f0ff;color:#2b5db6;border-radius:12px;padding:12px 36px;border:none;font-size:18px;cursor:pointer}
        .form-errors{color:#b22222;margin-bottom:12px}
        @media(max-width:780px){.container{padding:10px}.panel-right{padding:20px}.control input{width:100%}.form-grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="container">
        <section class="panel-right">
            <h2>新規登録（教員）</h2>
            <form method="post" class="signup-form">
                {% csrf_token %}

                {% if form.non_field_errors %}
                    <div class="form-errors">{{ form.non_field_errors }}</div>
                {% endif %}

                <div class="form-grid">
                    <label class="label">名前</label>
                    <div class="control">
                        <input type="text" name="user_name" id="id_name" required value="{{ form.user_name.value|default_if_none:'' }}">
                        {% if form.user_name.errors %}
                            <div class="error">{{ form.user_name.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <label class="label">メールアドレス</label>
                    <div class="control">
                        <input type="email" name="email" id="id_email" required value="{{ form.email.value|default_if_none:'' }}">
                        {% if form.email.errors %}
                            <div class="error">{{ form.email.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <label class="label">パスワード</label>
                    <div class="control"><input type="password" id="id_password1" name="password1" required></div>
                    {% if form.password1.errors %}
                        <div class="error">{{ form.password1.errors.0 }}</div>
                    {% endif %}

                    <label class="label">パスワード確認</label>
                    <div class="control"><input type="password" id="id_password2" name="password2" required></div>
                    {% if form.password2.errors %}
                        <div class="error">{{ form.password2.errors.0 }}</div>
                    {% endif %}

                    <label class="label">年齢</label>
                    <div class="control age-wrap">
                        <select id="id_age" name="age">
                            <option value="">▽</option>
                            {% for i in ages %}
                                <option value="{{ i }}"{% if form.age.value|stringformat:"s" == i|stringformat:"s" %} selected{% endif %}>{{ i }}歳</option>
                            {% endfor %}
                        </select>
                        {% if form.age.errors %}
                            <div class="error">{{ form.age.errors.0 }}</div>
                        {% endif %}
                    </div>

                    {# このテンプレートは教員登録用なので role は固定 #}
                    <input type="hidden" name="role" value="teacher">
                </div>

                <div class="submit-area">
                    <!-- フォーム送信して教員アカウントを作成 -->
                    <button type="submit" class="big-btn">新しく作る</button>
                </div>
            </form>
            <div style="text-align:center;margin-top:12px"><a href="{% url 'accounts:teacher_login' %}">ログインページへ</a></div>
        </section>
    </div>
</body>
</html>
